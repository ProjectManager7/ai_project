# LightRAG Workspaces - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

> ‚ö†Ô∏è **–í–ê–ñ–ù–û:** –ü–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —ç—Ç–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ production:
> - –ó–∞–º–µ–Ω–∏—Ç–µ –∫—Ä–µ–¥—ã –Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –∏ –∫–ª—é—á–∏
> - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–∞—Ä–æ–ª–µ–π: `openssl rand -base64 32`
> - –ó–∞–º–µ–Ω–∏—Ç–µ `primelevel.group` –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω
> - –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ Git!

## üìñ –ú–µ—Ö–∞–Ω–∏–∑–º —Ä–∞–±–æ—Ç—ã Workspaces

### –ß—Ç–æ —Ç–∞–∫–æ–µ Workspace –≤ LightRAG?

**Workspace** - —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º **–ª–æ–≥–∏—á–µ—Å–∫–æ–π –∏–∑–æ–ª—è—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö** –≤–Ω—É—Ç—Ä–∏ LightRAG, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- –•—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤ –æ–¥–Ω–æ–π —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∑–∞–ø—Ä–æ—Å–æ–≤ (—á–µ—Ä–µ–∑ WHERE —Ñ–∏–ª—å—Ç—Ä—ã)
- –≠–∫–æ–Ω–æ–º–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã –∑–∞ —Å—á—ë—Ç –æ–±—â–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏?

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Docker Volume (lightrag_storage)          ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  Workspace A  ‚îÇ  ‚îÇ  Workspace B  ‚îÇ  ‚îÇ  Workspace C  ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ               ‚îÇ  ‚îÇ               ‚îÇ  ‚îÇ               ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ –ì—Ä–∞—Ñ       ‚îÇ  ‚îÇ  ‚Ä¢ –ì—Ä–∞—Ñ       ‚îÇ  ‚îÇ  ‚Ä¢ –ì—Ä–∞—Ñ       ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ –í–µ–∫—Ç–æ—Ä—ã    ‚îÇ  ‚îÇ  ‚Ä¢ –í–µ–∫—Ç–æ—Ä—ã    ‚îÇ  ‚îÇ  ‚Ä¢ –í–µ–∫—Ç–æ—Ä—ã    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ –î–æ–∫—É–º–µ–Ω—Ç—ã  ‚îÇ  ‚îÇ  ‚Ä¢ –î–æ–∫—É–º–µ–Ω—Ç—ã  ‚îÇ  ‚îÇ  ‚Ä¢ –î–æ–∫—É–º–µ–Ω—Ç—ã  ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  –î–∞–Ω–Ω—ã–µ –ª–æ–≥–∏—á–µ—Å–∫–∏ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ –ø–æ–ª–µ "workspace"         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚ñ≤                  ‚ñ≤                  ‚ñ≤
         ‚îÇ                  ‚îÇ                  ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ Port    ‚îÇ       ‚îÇ Port    ‚îÇ       ‚îÇ Port    ‚îÇ
    ‚îÇ 7040    ‚îÇ       ‚îÇ 7041    ‚îÇ       ‚îÇ 7042    ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:**

1. **–û–±—â–µ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ** - –æ–¥–∏–Ω Docker volume –¥–ª—è –≤—Å–µ—Ö workspaces
2. **–õ–æ–≥–∏—á–µ—Å–∫–∞—è –∏–∑–æ–ª—è—Ü–∏—è** - –¥–∞–Ω–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä `workspace`
3. **–§–∏–∑–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** - –∫–∞–∂–¥—ã–π workspace —Å–æ–∑–¥–∞—ë—Ç —Å–≤–æ—é –ø–æ–¥–ø–∞–ø–∫—É –≤ volume
4. **–ò–Ω–¥–µ–∫—Å—ã –ë–î** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç –ø–æ workspace:
   ```sql
   CREATE INDEX idx_workspace_status ON documents (workspace, status);
   ```

5. **API –∏–∑–æ–ª—è—Ü–∏—è** - —Ä–∞–∑–Ω—ã–µ –ø–æ—Ä—Ç—ã/–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö Workspaces

### –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–æ–¥–∏–Ω workspace –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

**–ü—Ä–æ–±–ª–µ–º–∞:** –û–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `lightrag` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ.

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
1. [`traefik/traefik.yml`](traefik/traefik.yml) - –¥–æ–±–∞–≤–∏—Ç—å entrypoints –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ—Ä—Ç–æ–≤
2. [`docker-compose.yml`](docker-compose.yml) - –¥–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ workspace
3. [`.env`](.env) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –Ω—É–∂–Ω—ã workspace-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

---

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è Project A (–ø–µ—Ä–≤—ã–π workspace)

#### 1.1. –î–æ–±–∞–≤–∏—Ç—å entrypoint –≤ Traefik

–û—Ç–∫—Ä–æ–π—Ç–µ [`traefik/traefik.yml`](traefik/traefik.yml) –∏ –¥–æ–±–∞–≤—å—Ç–µ –ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 36:

```yaml
  # –ö–∞—Å—Ç–æ–º–Ω—ã–π HTTPS entry point –¥–ª—è LightRAG Project A
  websecure-7041:
    address: ":7041"
```

–¢–∞–∫–∂–µ –æ–±–Ω–æ–≤–∏—Ç–µ —Å–µ–∫—Ü–∏—é `ports` –≤ —Å–µ—Ä–≤–∏—Å–µ `traefik` –≤ [`docker-compose.yml`](docker-compose.yml):

```yaml
services:
  traefik:
    # ... existing config ...
    ports:
      - "80:80"
      - "127.0.0.1:8082:8080"
      - "443:443"
      - "5050:5050"
      - "7040:7040"     # Existing LightRAG (default workspace)
      - "7041:7041"     # NEW: LightRAG Project A
      - "8333:8333"
```

#### 1.2. –î–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å –≤ docker-compose.yml

–î–æ–±–∞–≤—å—Ç–µ **–ø–æ—Å–ª–µ** —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ `lightrag` (–ø—Ä–∏–º–µ—Ä–Ω–æ –ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 228):

```yaml
  # ===========================================
  # LIGHTRAG PROJECT A
  # ===========================================
  lightrag_project_a:
    image: ghcr.io/hkuds/lightrag:latest
    container_name: service_lightrag_project_a
    hostname: lightrag-project-a
    restart: unless-stopped
    environment:
      - TZ=${TZ}
      - TIKTOKEN_CACHE_DIR=/app/data/tiktoken
      - PORT=9621
    volumes:
      # –í–ê–ñ–ù–û: –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ—Ç –∂–µ volume –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
      - lightrag_storage:/app/data/rag_storage
      - ./lightrag/data/inputs:/app/data/inputs
      - ./lightrag/data/tiktoken:/app/data/tiktoken
      - ./lightrag/config.ini:/app/config.ini
      - ./.env:/app/.env:ro
      - ./shared:/data/shared
      - ./lightrag/patches/document_routes.py:/app/lightrag/api/routers/document_routes.py:ro
      - /etc/timezone:/etc/timezone:ro
      - /etc/localtime:/etc/localtime:ro
    env_file:
      - .env
    extra_hosts:
      - "host.docker.internal:host-gateway"
    networks:
      - internal
    # –ö–õ–Æ–ß–ï–í–û–ô –ú–û–ú–ï–ù–¢: –ø–µ—Ä–µ–¥–∞—ë–º workspace —á–µ—Ä–µ–∑ command (—Ç–æ–ª—å–∫–æ –∞—Ä–≥—É–º–µ–Ω—Ç—ã, ENTRYPOINT —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç python -m lightrag.api.lightrag_server)
    command: ["--workspace", "project_a", "--port", "9621"]
    labels:
      - "traefik.enable=true"
      # HTTP —Ä–æ—É—Ç–µ—Ä —Å —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–º –Ω–∞ HTTPS
      - "traefik.http.routers.lightrag-a-http.rule=Host(`${DOMAIN}`)"
      - "traefik.http.routers.lightrag-a-http.entrypoints=web"
      - "traefik.http.routers.lightrag-a-http.middlewares=lightrag-a-https-redirect"
      # HTTPS —Ä–æ—É—Ç–µ—Ä –¥–ª—è LightRAG Project A –Ω–∞ –ø–æ—Ä—Ç—É 7041
      - "traefik.http.routers.lightrag-a-https.rule=Host(`${DOMAIN}`)"
      - "traefik.http.routers.lightrag-a-https.entrypoints=websecure-7041"
      - "traefik.http.routers.lightrag-a-https.priority=91"
      - "traefik.http.routers.lightrag-a-https.tls=true"
      - "traefik.http.routers.lightrag-a-https.tls.certresolver=letsencrypt"
      # –°–µ—Ä–≤–∏—Å LightRAG Project A
      - "traefik.http.services.lightrag-a.loadbalancer.server.port=9621"
      # Middleware –¥–ª—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –Ω–∞ HTTPS
      - "traefik.http.middlewares.lightrag-a-https-redirect.redirectscheme.scheme=https"
      - "traefik.http.middlewares.lightrag-a-https-redirect.redirectscheme.port=7041"
```

#### 1.3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

```bash
cd /root/ai_project

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Ç–æ–ª—å–∫–æ Traefik –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –Ω–æ–≤—ã—Ö entrypoints
docker compose up -d --force-recreate traefik

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å Project A
docker compose up -d lightrag_project_a

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker compose ps | grep lightrag
```

#### 1.4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è Project A
curl -k https://primelevel.group:7041/health

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≤ Project A
curl -X POST "https://primelevel.group:7041/documents/text" \
  -H "Content-Type: application/json" \
  -H "X-API-Key: xxxxxxxxxxxxxx" \
  -d '{
    "text": "Test document for Project A"
  }' -k

# –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã (–¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å 0 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è default workspace)
curl -X GET "https://primelevel.group:7040/documents" \
  -H "X-API-Key: xxxxxxxxxxxxxx" -k
```

---

## üîÑ –ü–æ—à–∞–≥–æ–≤—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –¥–æ–±–∞–≤–ª–µ–Ω–∏—è Project B (–≤—Ç–æ—Ä–æ–≥–æ workspace)

### –®–∞–≥ 1: –û–±–Ω–æ–≤–∏—Ç—å Traefik –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

**–§–∞–π–ª:** [`traefik/traefik.yml`](traefik/traefik.yml)

–î–æ–±–∞–≤—å—Ç–µ –ø–æ—Å–ª–µ `websecure-7041`:

```yaml
  # –ö–∞—Å—Ç–æ–º–Ω—ã–π HTTPS entry point –¥–ª—è LightRAG Project B
  websecure-7042:
    address: ":7042"
```

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç—å docker-compose.yml

**–§–∞–π–ª:** [`docker-compose.yml`](docker-compose.yml)

#### 2.1. –î–æ–±–∞–≤–∏—Ç—å –ø–æ—Ä—Ç –≤ Traefik

–í —Å–µ–∫—Ü–∏–∏ `traefik.ports` –¥–æ–±–∞–≤—å—Ç–µ:

```yaml
      - "7042:7042"     # NEW: LightRAG Project B
```

#### 2.2. –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é `lightrag_project_a` –∏ –∏–∑–º–µ–Ω–∏—Ç–µ:

```yaml
  # ===========================================
  # LIGHTRAG PROJECT B
  # ===========================================
  lightrag_project_b:
    image: ghcr.io/hkuds/lightrag:latest
    container_name: service_lightrag_project_b
    hostname: lightrag-project-b
    restart: unless-stopped
    environment:
      - TZ=${TZ}
      - TIKTOKEN_CACHE_DIR=/app/data/tiktoken
      - PORT=9621
    volumes:
      # –í–ê–ñ–ù–û: –¢–æ—Ç –∂–µ volume –¥–ª—è –æ–±—â–µ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
      - lightrag_storage:/app/data/rag_storage
      - ./lightrag/data/inputs:/app/data/inputs
      - ./lightrag/data/tiktoken:/app/data/tiktoken
      - ./lightrag/config.ini:/app/config.ini
      - ./.env:/app/.env:ro
      - ./shared:/data/shared
      - ./lightrag/patches/document_routes.py:/app/lightrag/api/routers/document_routes.py:ro
      - /etc/timezone:/etc/timezone:ro
      - /etc/localtime:/etc/localtime:ro
    env_file:
      - .env
    extra_hosts:
      - "host.docker.internal:host-gateway"
    networks:
      - internal
    # –ò–ó–ú–ï–ù–ï–ù–û: workspace = "project_b" (—Ç–æ–ª—å–∫–æ –∞—Ä–≥—É–º–µ–Ω—Ç—ã, ENTRYPOINT —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç python -m lightrag.api.lightrag_server)
    command: ["--workspace", "project_b", "--port", "9621"]
    labels:
      - "traefik.enable=true"
      # HTTP —Ä–æ—É—Ç–µ—Ä —Å —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–º –Ω–∞ HTTPS
      - "traefik.http.routers.lightrag-b-http.rule=Host(`${DOMAIN}`)"
      - "traefik.http.routers.lightrag-b-http.entrypoints=web"
      - "traefik.http.routers.lightrag-b-http.middlewares=lightrag-b-https-redirect"
      # HTTPS —Ä–æ—É—Ç–µ—Ä –¥–ª—è LightRAG Project B –Ω–∞ –ø–æ—Ä—Ç—É 7042
      - "traefik.http.routers.lightrag-b-https.rule=Host(`${DOMAIN}`)"
      - "traefik.http.routers.lightrag-b-https.entrypoints=websecure-7042"
      - "traefik.http.routers.lightrag-b-https.priority=92"
      - "traefik.http.routers.lightrag-b-https.tls=true"
      - "traefik.http.routers.lightrag-b-https.tls.certresolver=letsencrypt"
      # –°–µ—Ä–≤–∏—Å LightRAG Project B
      - "traefik.http.services.lightrag-b.loadbalancer.server.port=9621"
      # Middleware –¥–ª—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –Ω–∞ HTTPS
      - "traefik.http.middlewares.lightrag-b-https-redirect.redirectscheme.scheme=https"
      - "traefik.http.middlewares.lightrag-b-https-redirect.redirectscheme.port=7042"
```

### –®–∞–≥ 3: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

```bash
cd /root/ai_project

# 1. –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å Traefik –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ entrypoint
docker compose up -d --force-recreate traefik

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å Project B
docker compose up -d lightrag_project_b

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç
docker compose ps
```

**–í–∞–∂–Ω–æ –ø—Ä–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å `command`:**

Docker-–æ–±—Ä–∞–∑ LightRAG –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π `ENTRYPOINT`:
```dockerfile
ENTRYPOINT ["python", "-m", "lightrag.api.lightrag_server"]
```

–ü–æ—ç—Ç–æ–º—É –≤ `command` –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å **—Ç–æ–ª—å–∫–æ –∞—Ä–≥—É–º–µ–Ω—Ç—ã**, –∞ –Ω–µ –ø–æ–ª–Ω—É—é –∫–æ–º–∞–Ω–¥—É:
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ:** `command: ["--workspace", "project_a", "--port", "9621"]`
- ‚ùå **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:** `command: ["lightrag-server", "--workspace", "project_a"]`
- ‚ùå **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:** `command: ["python", "-m", "lightrag.api.lightrag_server", "--workspace", "project_a"]`

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å ENTRYPOINT –º–æ–∂–Ω–æ –∫–æ–º–∞–Ω–¥–æ–π:
```bash
docker inspect service_lightrag | grep -A 5 "Entrypoint"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

```
NAME                         STATUS
service_lightrag             Up (default workspace, port 7040)
service_lightrag_project_a   Up (project_a, port 7041)
service_lightrag_project_b   Up (project_b, port 7042)
service_traefik              Up
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–æ–ª—è—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

```bash
# –î–æ–±–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç –≤ Project B
curl -X POST "https://primelevel.group:7042/documents/text" \
  -H "Content-Type: application/json" \
  -H "X-API-Key: xxxxxxxxxxxxxx" \
  -d '{
    "text": "Document only for Project B"
  }' -k

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Project A –Ω–µ –≤–∏–¥–∏—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã Project B
curl -X GET "https://primelevel.group:7041/documents" \
  -H "X-API-Key: xxxxxxxxxxxxxx" -k | jq '.total'
# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Ç–æ–ª—å–∫–æ –∏–∑ Project A

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Project B –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã
curl -X GET "https://primelevel.group:7042/documents" \
  -H "X-API-Key: xxxxxxxxxxxxxx" -k | jq '.total'
# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å —Ç–æ–ª—å–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç—ã Project B
```

---

## üíæ –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ

### –ö–∞–∫ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ?

**Docker Volume:** `lightrag_storage` (Docker-managed volume)

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ volume
docker volume inspect ai_project_lightrag_storage

# –í—ã–≤–æ–¥:
[
    {
        "Name": "ai_project_lightrag_storage",
        "Driver": "local",
        "Mountpoint": "/var/lib/docker/volumes/ai_project_lightrag_storage/_data",
        ...
    }
]
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –≤–Ω—É—Ç—Ä–∏ volume:**

```
/var/lib/docker/volumes/ai_project_lightrag_storage/_data/
‚îú‚îÄ‚îÄ default/                    # Default workspace (port 7040)
‚îÇ   ‚îú‚îÄ‚îÄ graph_chunk_entity_relation.graphml
‚îÇ   ‚îú‚îÄ‚îÄ kv_store_*.json
‚îÇ   ‚îú‚îÄ‚îÄ vdb_chunks.json
‚îÇ   ‚îî‚îÄ‚îÄ doc_status.json
‚îú‚îÄ‚îÄ project_a/                  # Project A workspace (port 7041)
‚îÇ   ‚îú‚îÄ‚îÄ graph_chunk_entity_relation.graphml
‚îÇ   ‚îú‚îÄ‚îÄ kv_store_*.json
‚îÇ   ‚îú‚îÄ‚îÄ vdb_chunks.json
‚îÇ   ‚îî‚îÄ‚îÄ doc_status.json
‚îî‚îÄ‚îÄ project_b/                  # Project B workspace (port 7042)
    ‚îú‚îÄ‚îÄ graph_chunk_entity_relation.graphml
    ‚îú‚îÄ‚îÄ kv_store_*.json
    ‚îú‚îÄ‚îÄ vdb_chunks.json
    ‚îî‚îÄ‚îÄ doc_status.json
```

### –ì–∞—Ä–∞–Ω—Ç–∏–∏ —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

‚úÖ **–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø—Ä–∏:**
- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (`docker compose restart`)
- –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (`docker compose up -d --force-recreate`)
- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å–µ—Ä–≤–µ—Ä–∞
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –æ–±—Ä–∞–∑–∞ LightRAG

‚ùå **–î–∞–Ω–Ω—ã–µ –ù–ï —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –ø—Ä–∏:**
- –£–¥–∞–ª–µ–Ω–∏–∏ volume (`docker volume rm ai_project_lightrag_storage`)
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ `docker compose down -v` (—Ñ–ª–∞–≥ `-v` —É–¥–∞–ª—è–µ—Ç volumes)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏

```bash
# 1. –î–æ–±–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç –≤ Project A
curl -X POST "https://primelevel.group:7041/documents/text" \
  -H "Content-Type: application/json" \
  -H "X-API-Key: xxxxxxxxxxxxxx" \
  -d '{"text": "Persistence test"}' -k

# 2. –ó–∞–ø–æ–º–Ω–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
curl -X GET "https://primelevel.group:7041/documents" \
  -H "X-API-Key: xxxxxxxxxxxxxx" -k | jq '.total'

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker compose restart lightrag_project_a

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –º–µ—Å—Ç–µ
curl -X GET "https://primelevel.group:7041/documents" \
  -H "X-API-Key: xxxxxxxxxxxxxx" -k | jq '.total'
# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å —Ç–æ –∂–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
```

---

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Workspaces

### –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö workspaces

```bash
# –í–æ–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker exec -it service_lightrag bash

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö
ls -la /app/data/rag_storage/

# –í—ã–≤–æ–¥:
drwxr-xr-x 2 root root 4096 Oct 16 12:00 default
drwxr-xr-x 2 root root 4096 Oct 16 12:05 project_a
drwxr-xr-x 2 root root 4096 Oct 16 12:10 project_b
```

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ workspace

```bash
# –ë—ç–∫–∞–ø –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
docker run --rm \
  -v ai_project_lightrag_storage:/data \
  -v $(pwd)/backups:/backup \
  alpine tar czf /backup/lightrag_backup_$(date +%Y%m%d_%H%M%S).tar.gz -C /data .

# –ë—ç–∫–∞–ø –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ workspace
docker run --rm \
  -v ai_project_lightrag_storage:/data \
  -v $(pwd)/backups:/backup \
  alpine tar czf /backup/project_a_$(date +%Y%m%d_%H%M%S).tar.gz -C /data/project_a .
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞

```bash
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å—ë
docker run --rm \
  -v ai_project_lightrag_storage:/data \
  -v $(pwd)/backups:/backup \
  alpine sh -c "cd /data && tar xzf /backup/lightrag_backup_YYYYMMDD_HHMMSS.tar.gz"

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π workspace
docker run --rm \
  -v ai_project_lightrag_storage:/data \
  -v $(pwd)/backups:/backup \
  alpine sh -c "mkdir -p /data/project_a && cd /data/project_a && tar xzf /backup/project_a_YYYYMMDD_HHMMSS.tar.gz"
```

### –£–¥–∞–ª–µ–Ω–∏–µ workspace

```bash
# –í–ù–ò–ú–ê–ù–ò–ï: –£–¥–∞–ª—è–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ workspace –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è!

# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä workspace
docker compose stop lightrag_project_b

# 2. –£–¥–∞–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
docker exec service_lightrag rm -rf /app/data/rag_storage/project_b

# 3. –£–¥–∞–ª–∏—Ç—å —Å–µ—Ä–≤–∏—Å –∏–∑ docker-compose.yml
# 4. –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Å—Ç–µ–∫
docker compose up -d
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –≤—Å–µ—Ö workspaces

```bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö workspaces
for port in 7040 7041 7042; do
  echo "=== Checking port $port ==="
  curl -s -k https://primelevel.group:$port/health | jq
done
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ workspace
docker compose logs -f lightrag_project_a

# –õ–æ–≥–∏ –≤—Å–µ—Ö LightRAG –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker compose logs -f lightrag lightrag_project_a lightrag_project_b

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
docker compose logs --tail=100 lightrag_project_a
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Å–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º LightRAG
docker stats $(docker ps --filter "name=lightrag" --format "{{.Names}}")
```

---

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é

### –ö–æ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–π workspace?

‚úÖ **–î–æ–±–∞–≤–ª—è–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π workspace –µ—Å–ª–∏:**
- –ù—É–∂–Ω–∞ –ø–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –ø—Ä–æ–µ–∫—Ç–∞–º–∏
- –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
- –†–∞–∑–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã –∏–º–µ—é—Ç —Ä–∞–∑–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É
- –ù—É–∂–µ–Ω –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

‚ùå **–ù–µ –Ω—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π workspace –µ—Å–ª–∏:**
- –ü—Ä–æ–µ–∫—Ç—ã —Å–≤—è–∑–∞–Ω—ã –∏ –¥–æ–ª–∂–Ω—ã –¥–µ–ª–∏—Ç—å—Å—è –∑–Ω–∞–Ω–∏—è–º–∏
- –ù–∏–∑–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `workspace` –≤ API)
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã —Å–µ—Ä–≤–µ—Ä–∞

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `.env` –¥–ª—è –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö workspaces:**

```env
# –£–≤–µ–ª–∏—á—å—Ç–µ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º –¥–ª—è workspace —Å –±–æ–ª—å—à–∏–º –æ–±—ä–µ–º–æ–º –¥–∞–Ω–Ω—ã—Ö
MAX_ASYNC=16                    # –£–≤–µ–ª–∏—á–µ–Ω–æ —Å 12
MAX_PARALLEL_INSERT=5           # –£–≤–µ–ª–∏—á–µ–Ω–æ —Å 3
EMBEDDING_FUNC_MAX_ASYNC=32     # –£–≤–µ–ª–∏—á–µ–Ω–æ —Å 24
EMBEDDING_BATCH_NUM=200         # –£–≤–µ–ª–∏—á–µ–Ω–æ —Å–æ 100
```

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –≤ docker-compose.yml:**

```yaml
  lightrag_project_a:
    # ... existing config ...
    deploy:
      resources:
        limits:
          cpus: '2.0'
          memory: 4G
        reservations:
          cpus: '1.0'
          memory: 2G
```

---

## üìù –ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ Workspace

- [ ] –î–æ–±–∞–≤–∏—Ç—å entrypoint –≤ [`traefik/traefik.yml`](traefik/traefik.yml)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ—Ä—Ç –≤ —Å–µ–∫—Ü–∏—é `traefik.ports` –≤ [`docker-compose.yml`](docker-compose.yml)
- [ ] –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å –≤ [`docker-compose.yml`](docker-compose.yml) —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º:
  - [ ] `container_name`
  - [ ] `hostname`
  - [ ] `--workspace` –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º –≤ `command`
  - [ ] `entrypoints` (websecure-XXXX)
  - [ ] `priority` –≤ Traefik labels
- [ ] –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å Traefik: `docker compose up -d --force-recreate traefik`
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—ã–π workspace: `docker compose up -d lightrag_project_X`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å health: `curl -k https://primelevel.group:XXXX/health`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–æ–ª—è—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö
- [ ] –î–æ–±–∞–≤–∏—Ç—å workspace –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- [ ] –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –¥–∞–Ω–Ω—ã—Ö

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

- ‚úÖ **–õ–æ–≥–∏—á–µ—Å–∫–∞—è –∏–∑–æ–ª—è—Ü–∏—è:** –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ LightRAG —á–µ—Ä–µ–∑ —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ workspace
- ‚úÖ **API –∏–∑–æ–ª—è—Ü–∏—è:** –ö–∞–∂–¥—ã–π workspace –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ä—Ç—É —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º SSL
- ‚úÖ **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –í—Å–µ workspaces –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–±—â–∏–π `LIGHTRAG_API_KEY` –∏–∑ `.env`

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. **–†–∞–∑–Ω—ã–µ API –∫–ª—é—á–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö workspaces:**
   - –°–æ–∑–¥–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ `.env` —Ñ–∞–π–ª—ã: `.env.project_a`, `.env.project_b`
   - –ú–æ–Ω—Ç–∏—Ä—É–π—Ç–µ –∏—Ö –≤ `env_file` —Å–µ–∫—Ü–∏–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

2. **Firewall –ø—Ä–∞–≤–∏–ª–∞:**
   ```bash
   # –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ workspace —Ç–æ–ª—å–∫–æ —Å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö IP
   ufw allow from 192.168.1.0/24 to any port 7041
   ```

3. **Rate limiting —á–µ—Ä–µ–∑ Traefik:**
   ```yaml
   labels:
     - "traefik.http.middlewares.lightrag-a-ratelimit.ratelimit.average=100"
     - "traefik.http.middlewares.lightrag-a-ratelimit.ratelimit.burst=50"
     - "traefik.http.routers.lightrag-a-https.middlewares=lightrag-a-ratelimit"
   ```

---

## üìû –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ë—ã—Å—Ç—Ä—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö LightRAG workspaces
docker compose restart $(docker compose ps --services | grep lightrag)

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞–∑–º–µ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∫–∞–∂–¥–æ–≥–æ workspace
docker exec service_lightrag du -sh /app/data/rag_storage/*

# –≠–∫—Å–ø–æ—Ä—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
docker compose config > docker-compose.resolved.yml

# –ü—Ä–æ–≤–µ—Ä–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
echo | openssl s_client -connect primelevel.group:7041 -servername primelevel.group 2>/dev/null | openssl x509 -noout -dates
```

---

## ‚ùì –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã (FAQ)

### 1. ‚úÖ Default workspace (–ø–æ—Ä—Ç 7040) –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π?

**–î–∞, –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**

- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä `service_lightrag` –æ—Å—Ç–∞—ë—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ `/app/data/rag_storage/default/` —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è
- –ù–∏–∫–∞–∫–∏—Ö –º–∏–≥—Ä–∞—Ü–∏–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è
- –ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö 100% - –Ω–æ–≤—ã–µ workspaces –Ω–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç default

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è project_a:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –º–µ—Å—Ç–µ
curl -X GET "https://primelevel.group:7040/documents" \
  -H "X-API-Key: xxxxxxxxxxxxxx" -k | jq '.total'
# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –ø—Ä–µ–∂–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –≤ volume –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è workspaces:**
```
/var/lib/docker/volumes/ai_project_lightrag_storage/_data/
‚îú‚îÄ‚îÄ default/      # ‚Üê –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ (–ø–æ—Ä—Ç 7040) - –ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô
‚îú‚îÄ‚îÄ project_a/    # ‚Üê –ù–æ–≤—ã–π workspace (–ø–æ—Ä—Ç 7041)
‚îî‚îÄ‚îÄ project_b/    # ‚Üê –ù–æ–≤—ã–π workspace (–ø–æ—Ä—Ç 7042)
```

---

### 2. ‚úÖ –î–∞, —á–µ—Ä–µ–∑ UI –º–æ–∂–Ω–æ –∑–∞—Ö–æ–¥–∏—Ç—å –≤ –∫–∞–∂–¥—ã–π workspace –æ—Ç–¥–µ–ª—å–Ω–æ

**URLs –¥–ª—è WebUI:**

| Workspace | Port | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|------|-----|----------|
| Default | 7040 | `https://primelevel.group:7040` | –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π workspace |
| Project A | 7041 | `https://primelevel.group:7041` | –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π workspace –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ A |
| Project B | 7042 | `https://primelevel.group:7042` | –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π workspace –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ B |

**–ö–∞–∂–¥—ã–π workspace –∏–º–µ–µ—Ç:**
- ‚úÖ –°–≤–æ–π Web UI
- ‚úÖ –°–≤–æ–π API endpoint
- ‚úÖ –°–≤–æ—é –±–∞–∑—É –∑–Ω–∞–Ω–∏–π
- ‚úÖ –°–≤–æ–π –≥—Ä–∞—Ñ (–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
- ‚úÖ –ù–µ–∑–∞–≤–∏—Å–∏–º—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –∑–∞–ø—Ä–æ—Å–æ–≤

**–í–∏–∑—É–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ –¥–æ—Å—Ç—É–ø–∞:**

```
Browser ‚Üí https://primelevel.group:7040 ‚Üí service_lightrag          ‚Üí /default/
Browser ‚Üí https://primelevel.group:7041 ‚Üí service_lightrag_project_a ‚Üí /project_a/
Browser ‚Üí https://primelevel.group:7042 ‚Üí service_lightrag_project_b ‚Üí /project_b/
```

---

### 3. üîê –õ–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å –¥–ª—è UI –≤—Å–µ—Ö workspaces

**–¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** –í—Å–µ workspaces –∏—Å–ø–æ–ª—å–∑—É—é—Ç **–æ–±—â—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é** –∏–∑ [.env](.env:75-85):

```env
# JWT Authentication
AUTH_ACCOUNTS=admin:xxxxxxxxxxxxxx
TOKEN_SECRET=xxxxxxxxxxxxxx

# API Key Authentication
LIGHTRAG_API_KEY=xxxxxxxxxxxxxx
```

**–í–∞–∂–Ω–æ:** –õ–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –¥–ª—è –≤—Å–µ—Ö workspaces (default, project_a, project_b). –ï—Å–ª–∏ –Ω—É–∂–Ω—ã —Ä–∞–∑–Ω—ã–µ –ª–æ–≥–∏–Ω—ã –∏ –ø–∞—Ä–æ–ª–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ workspace, —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å —Ç—Ä–∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö `.env` —Ñ–∞–π–ª–∞.

#### –í—Ö–æ–¥ —á–µ—Ä–µ–∑ Web UI:

**–î–ª—è –≤—Å–µ—Ö workspaces (7040, 7041, 7042):**

| –ü–æ–ª–µ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|------|----------|
| **Username** | `admin` |
| **Password** | `xxxxxxxxxxxxxx` |

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API:

**–ú–µ—Ç–æ–¥ 1: JWT —Ç–æ–∫–µ–Ω (—á–µ—Ä–µ–∑ Web UI)**
1. –û—Ç–∫—Ä—ã—Ç—å `https://primelevel.group:7041`
2. –í–≤–µ—Å—Ç–∏ `admin` / `xxxxxxxxxxxxxx`
3. –¢–æ–∫–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ –Ω–∞ 24 —á–∞—Å–∞ (`TOKEN_EXPIRE_HOURS=24`)

**–ú–µ—Ç–æ–¥ 2: API Key (–¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞)**
```bash
# –û–¥–∏–Ω–∞–∫–æ–≤—ã–π –¥–ª—è –≤—Å–µ—Ö workspaces
curl -X POST "https://primelevel.group:7041/documents/text" \
  -H "X-API-Key: xxxxxxxxxxxxxx" \
  -H "Content-Type: application/json" \
  -d '{"text": "Test document"}' -k
```

---

### üìä –ò—Ç–æ–≥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–æ—Å—Ç—É–ø–∞

#### –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–ø–æ—Å–ª–µ —Å–ª–µ–¥–æ–≤–∞–Ω–∏—è WORKSPACE-INFO.md):

| Workspace | URL | Username | Password | API Key | –ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö |
|-----------|-----|----------|----------|---------|-----------------|
| Default | `https://primelevel.group:7040` | `admin` | `xxxxxxxxxxxxxx` | `xxxxxxxxxxxxxx` | ‚úÖ 100% |
| Project A | `https://primelevel.group:7041` | `admin` | `xxxxxxxxxxxxxx` | `xxxxxxxxxxxxxx` | ‚úÖ 100% |
| Project B | `https://primelevel.group:7042` | `admin` | `xxxxxxxxxxxxxx` | `xxxxxxxxxxxxxx` | ‚úÖ 100% |

**–í–∞–∂–Ω–æ:** –í—Å–µ workspaces –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–±—â–∏–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –Ω–æ **–¥–∞–Ω–Ω—ã–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã** –Ω–∞ —É—Ä–æ–≤–Ω–µ LightRAG.

---

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–ª—è—Ü–∏–∏ –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```bash
# 1. –î–æ–±–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç –≤ Default workspace
curl -X POST "https://primelevel.group:7040/documents/text" \
  -H "Content-Type: application/json" \
  -H "X-API-Key: xxxxxxxxxxxxxx" \
  -d '{"text": "Document in DEFAULT workspace"}' -k

# 2. –î–æ–±–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç –≤ Project A
curl -X POST "https://primelevel.group:7041/documents/text" \
  -H "Content-Type: application/json" \
  -H "X-API-Key: xxxxxxxxxxxxxx" \
  -d '{"text": "Document in PROJECT A workspace"}' -k

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–æ–ª—è—Ü–∏—é - Project A –ù–ï –¥–æ–ª–∂–µ–Ω –≤–∏–¥–µ—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã Default
curl -X GET "https://primelevel.group:7041/documents" \
  -H "X-API-Key: xxxxxxxxxxxxxx" -k | jq '.items[] | .content'
# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: —Ç–æ–ª—å–∫–æ "Document in PROJECT A workspace"

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–æ–ª—è—Ü–∏—é - Default –ù–ï –¥–æ–ª–∂–µ–Ω –≤–∏–¥–µ—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã Project A
curl -X GET "https://primelevel.group:7040/documents" \
  -H "X-API-Key: xxxxxxxxxxxxxx" -k | jq '.items[] | .content'
# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: —Ç–æ–ª—å–∫–æ "Document in DEFAULT workspace"
```

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 2025-10-16
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-10-16
**–í–µ—Ä—Å–∏—è LightRAG:** `ghcr.io/hkuds/lightrag:latest`
**–ê–≤—Ç–æ—Ä:** AI Assistant
**–ü—Ä–æ–µ–∫—Ç:** ai_project (primelevel.group)
