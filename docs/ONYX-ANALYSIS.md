# üîç –ê–Ω–∞–ª–∏–∑: Onyx –Ω–∞ —Ç–µ–∫—É—â–µ–º —Å–µ—Ä–≤–µ—Ä–µ vs –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2025-10-07
**–°–µ—Ä–≤–µ—Ä:** social.aigain.io
**–ó–∞–¥–∞—á–∞:** –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Onyx

---

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞

### –†–µ—Å—É—Ä—Å—ã:
```
RAM:        11 GB total
Used:       3.6 GB (32%)
Available:  8.1 GB (68%)

Disk:       193 GB total
Used:       22 GB (12%)
Available:  172 GB (88%)

CPU:        6 cores
```

### –¢–µ–∫—É—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã –∏ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ:

| –°–µ—Ä–≤–∏—Å | RAM | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|--------|-----|------------|
| **Traefik** | 5 MB | Reverse proxy, SSL |
| **MySQL** | 52 MB | –û—Å–Ω–æ–≤–Ω–∞—è –ë–î |
| **Redis** | 27 MB | –ö—ç—à –∏ –æ—á–µ—Ä–µ–¥–∏ |
| **ChromaDB** | 344 MB | –í–µ–∫—Ç–æ—Ä–Ω–∞—è –ë–î |
| **Chroma-API** | 355 MB | REST API –¥–ª—è ChromaDB |
| **Flowise** | 370 MB | AI workflow –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ |
| **Node-RED** | 245 MB | –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∏ –±–æ—Ç—ã |
| **LightRAG** | 100 MB | Knowledge Graph & RAG |
| **phpMyAdmin** | 12 MB | MySQL management |
| **Nginx Static** | 5 MB | –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã |
| **–ò–¢–û–ì–û** | **~1.5 GB** | |

---

## üèóÔ∏è Onyx: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–µ—Å—É—Ä—Å–∞–º

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Onyx:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | RAM (min) | RAM (optimal) | Disk | CPU | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|-----------|---------------|------|-----|------------|
| **PostgreSQL** | 300 MB | 500 MB | 5-10 GB | 0.5 core | –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ |
| **Vespa** | 1 GB | 2-4 GB | 10-20 GB | 1-2 cores | –ü–æ–∏—Å–∫–æ–≤—ã–π –¥–≤–∏–∂–æ–∫ (Java) |
| **Backend (FastAPI)** | 500 MB | 800 MB | 2 GB | 1 core | API, –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä—ã, –æ–±—Ä–∞–±–æ—Ç–∫–∞ |
| **Frontend (Next.js)** | 200 MB | 300 MB | 1 GB | 0.5 core | –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å |
| **Nginx** | 50 MB | 50 MB | 100 MB | 0.1 core | Internal reverse proxy |
| **–ò–¢–û–ì–û** | **~2 GB** | **~3.6 GB** | **~20-30 GB** | **3-4 cores** |

### ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è:

1. **Vespa** - —ç—Ç–æ —Å–∞–º—ã–π —Ç—è–∂–µ–ª—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç:
   - Java-based –ø–æ–∏—Å–∫–æ–≤—ã–π –¥–≤–∏–∂–æ–∫ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è
   - –¢—Ä–µ–±—É–µ—Ç –º–∏–Ω–∏–º—É–º 1GB RAM –¥–ª—è –∑–∞–ø—É—Å–∫–∞
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 2-4GB –¥–ª—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã
   - –ê–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç CPU –¥–ª—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
   - –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–π Disk I/O

2. **PostgreSQL** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ë–î:
   - –£ –Ω–∞—Å —É–∂–µ –µ—Å—Ç—å MySQL
   - Onyx **—Ç—Ä–µ–±—É–µ—Ç** PostgreSQL (–Ω–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MySQL)
   - –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

3. **Nginx –≤–Ω—É—Ç—Ä–∏ Onyx**:
   - Onyx –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Nginx –∫–∞–∫ internal reverse proxy
   - –†–æ—É—Ç–∏—Ç –∑–∞–ø—Ä–æ—Å—ã –º–µ–∂–¥—É Frontend (3000) –∏ Backend (8080)
   - **–ù–ï –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç** —Å –Ω–∞—à–∏–º Nginx Static (—Ä–∞–∑–Ω—ã–µ network namespace)
   - Onyx Nginx —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º –ø–æ—Ä—Ç—É 80, –Ω–∞—Ä—É–∂—É —Å–º–æ—Ç—Ä–∏—Ç —á–µ—Ä–µ–∑ Traefik –Ω–∞ 2060

---

## ‚öñÔ∏è –°—Ü–µ–Ω–∞—Ä–∏–π 1: Onyx –Ω–∞ —Ç–µ–∫—É—â–µ–º —Å–µ—Ä–≤–µ—Ä–µ

### ‚úÖ –ü–ª—é—Å—ã:

1. **–ï–¥–∏–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**
   - –û–¥–∏–Ω docker-compose.yml –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ–º
   - –ï–¥–∏–Ω—ã–π Traefik (SSL –∏–∑ –∫–æ—Ä–æ–±–∫–∏)
   - –û–±—â–∏–π Redis (—ç–∫–æ–Ω–æ–º–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤)
   - –ï–¥–∏–Ω—ã–π –¥–æ–º–µ–Ω social.aigain.io

2. **–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å–µ—Ç–µ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
   - –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –≤ –æ–¥–Ω–æ–π Docker —Å–µ—Ç–∏ `internal`
   - Onyx –º–æ–∂–µ—Ç –ª–µ–≥–∫–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ LightRAG, ChromaDB, MySQL
   - Flowise –∏ Node-RED –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Onyx API
   - –ü—Ä–∏–º–µ—Ä: `http://onyx-api-server:8080` –∏–∑ –ª—é–±–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

3. **–ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**
   - –û–¥–∏–Ω Traefik dashboard
   - –ï–¥–∏–Ω—ã–µ –ª–æ–≥–∏ –≤ `/root/ai_project/logs/`
   - –ï–¥–∏–Ω—ã–π Fail2ban
   - –ü—Ä–æ—â–µ backup —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

4. **–≠–∫–æ–Ω–æ–º–∏—è –∑–∞—Ç—Ä–∞—Ç**
   - –ù–µ –Ω—É–∂–µ–Ω –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π VPS
   - –ù–µ –Ω—É–∂–µ–Ω –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –¥–æ–º–µ–Ω/SSL
   - –ù–µ –Ω—É–∂–Ω–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

5. **–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–µ—Å—É—Ä—Å–æ–≤**
   - –ï—Å—Ç—å 8.1GB —Å–≤–æ–±–æ–¥–Ω–æ–π RAM
   - Onyx –Ω—É–∂–Ω–æ 2-4GB
   - –û—Å—Ç–∞–Ω–µ—Ç—Å—è 4-6GB –¥–ª—è –±—É—Ñ–µ—Ä–∞
   - –î–∏—Å–∫–∞ –º–Ω–æ–≥–æ (172GB —Å–≤–æ–±–æ–¥–Ω–æ)

### ‚ùå –ú–∏–Ω—É—Å—ã:

1. **–†–µ—Å—É—Ä—Å–Ω–∞—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è**
   - Vespa (Onyx) vs ChromaDB - –æ–±–∞ –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ –ø–æ–∏—Å–∫–æ–≤–∏–∫–∏
   - PostgreSQL (Onyx) vs MySQL - –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è –∑–∞ Disk I/O
   - 6 CPU cores –±—É–¥—É—Ç –¥–µ–ª–∏—Ç—å—Å—è –º–µ–∂–¥—É 15 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
   - –ü—Ä–∏ –ø–∏–∫–æ–≤—ã—Ö –Ω–∞–≥—Ä—É–∑–∫–∞—Ö –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω–æ

2. **–†–∏—Å–∫ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏**
   - –ï—Å–ª–∏ Vespa –Ω–∞—á–Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—É—é –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é ‚Üí CPU spike
   - –ú–æ–∂–µ—Ç –∑–∞–º–µ–¥–ª–∏—Ç—å —Ä–∞–±–æ—Ç—É Node-RED, Flowise, LightRAG
   - –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –ø–æ—Å—Ç—Ä–∞–¥–∞—é—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

3. **–°–ª–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ª–∞–¥–∫–∏**
   - 15 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ –æ–¥–Ω–æ–º docker-compose.yml (–ø—Ä–æ—Ç–∏–≤ 10 —Å–µ–π—á–∞—Å)
   - –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å–ª–æ–∂–Ω–µ–µ –Ω–∞–π—Ç–∏ –ø—Ä–∏—á–∏–Ω—É
   - –õ–æ–≥–∏ Onyx —Å–º–µ—à–∞—é—Ç—Å—è —Å –ª–æ–≥–∞–º–∏ –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

4. **–í—Å–µ —è–π—Ü–∞ –≤ –æ–¥–Ω–æ–π –∫–æ—Ä–∑–∏–Ω–µ**
   - –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä —É–ø–∞–¥–µ—Ç ‚Üí –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã
   - –ï—Å–ª–∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—Å—è –¥–∏—Å–∫ ‚Üí –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã —É–ø–∞–¥—É—Ç
   - –ï—Å–ª–∏ DDoS ‚Üí –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –ø–æ–¥ —É–¥–∞—Ä–æ–º

5. **–°–ª–æ–∂–Ω–æ—Å—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π**
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Onyx –º–æ–∂–µ—Ç –∑–∞—Ç—Ä–æ–Ω—É—Ç—å –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã
   - –ù—É–∂–Ω–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å downtime –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
   - Rollback —Å–ª–æ–∂–Ω–µ–µ

### üìä –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Onyx:

```
–¢–µ–∫—É—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã:     1.5 GB RAM
Onyx (minimum):      2.0 GB RAM
Onyx (optimal):      3.6 GB RAM
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–ò–¢–û–ì–û (minimum):     3.5 GB / 11 GB (32%)
–ò–¢–û–ì–û (optimal):     5.1 GB / 11 GB (46%)
–°–≤–æ–±–æ–¥–Ω–æ (min):      7.5 GB (68%)
–°–≤–æ–±–æ–¥–Ω–æ (opt):      5.9 GB (54%)
```

**–í—ã–≤–æ–¥:** –†–µ—Å—É—Ä—Å–æ–≤ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, –Ω–æ –º–∞–ª–æ –±—É—Ñ–µ—Ä–∞ –¥–ª—è –ø–∏–∫–æ–≤.

---

## üñ•Ô∏è –°—Ü–µ–Ω–∞—Ä–∏–π 2: Onyx –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ

### ‚úÖ –ü–ª—é—Å—ã:

1. **–ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤**
   - Onyx –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ç–µ–∫—É—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã
   - –¢–µ–∫—É—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ Onyx
   - –ù–µ–∑–∞–≤–∏—Å–∏–º–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –ú–æ–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å 8GB RAM —Ç–æ–ª—å–∫–æ –ø–æ–¥ Onyx

2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å**
   - –ï—Å–ª–∏ Onyx —É–ø–∞–¥–µ—Ç ‚Üí –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç
   - –ï—Å–ª–∏ —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä —É–ø–∞–¥–µ—Ç ‚Üí Onyx —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –ú–µ–Ω—å—à–µ —Ä–∏—Å–∫ cascade failure
   - –ú–æ–∂–Ω–æ —Ä–∞–∑–Ω—ã–µ security –ø–æ–ª–∏—Ç–∏–∫–∏

3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
   - Onyx –ø–æ–ª—É—á–∞–µ—Ç –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã —Å–µ—Ä–≤–µ—Ä–∞
   - Vespa –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –ø–æ–ª–Ω—É—é –º–æ—â–Ω–æ—Å—Ç—å
   - –ù–µ—Ç –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏ –∑–∞ CPU/RAM/Disk I/O
   - –ë—ã—Å—Ç—Ä–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

4. **–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞**
   - Onyx –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω ‚Üí –ø—Ä–æ—â–µ –Ω–∞–π—Ç–∏ –ø—Ä–æ–±–ª–µ–º—ã
   - –õ–æ–≥–∏ Onyx –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
   - –ú–µ–Ω—å—à–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
   - –ü—Ä–æ—â–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

5. **–ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**
   - –ú–æ–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å Onyx –±–µ–∑ —Ä–∏—Å–∫–∞ –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
   - –ú–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏ –æ—Ç–¥–µ–ª—å–Ω–æ
   - Rollback –±–µ–∑ –≤–ª–∏—è–Ω–∏—è –Ω–∞ production —Å–µ—Ä–≤–∏—Å—ã

6. **–ì–∏–±–∫–æ—Å—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è**
   - –ú–æ–∂–Ω–æ –≤–∑—è—Ç—å —Å–µ—Ä–≤–µ—Ä —Å –±–æ–ª—å—à–∏–º –æ–±—ä–µ–º–æ–º RAM (16-32GB)
   - –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ CPU cores
   - –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SSD –¥–∏—Å–∫–∏ –¥–ª—è Vespa

### ‚ùå –ú–∏–Ω—É—Å—ã:

1. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã**
   - –°—Ç–æ–∏–º–æ—Å—Ç—å VPS: $20-50/–º–µ—Å—è—Ü (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)
   - Onyx —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç: 8GB RAM, 4 CPU cores, 50GB SSD
   - –ü—Ä–∏–º–µ—Ä (DigitalOcean): $48/–º–µ—Å—è—Ü –∑–∞ 8GB/4CPU/160GB
   - –ü—Ä–∏–º–µ—Ä (Hetzner): ‚Ç¨20/–º–µ—Å—è—Ü –∑–∞ 8GB/4CPU/160GB

2. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã**
   - –ù—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π Traefik –∏–ª–∏ Nginx
   - –ù—É–∂–Ω—ã –æ—Ç–¥–µ–ª—å–Ω—ã–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
   - –ù—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π Fail2ban
   - –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

3. **–°–µ—Ç–µ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–ª–æ–∂–Ω–µ–µ**
   - –î–≤–∞ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–µ –≤ –æ–¥–Ω–æ–π Docker —Å–µ—Ç–∏
   - –î–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –Ω—É–∂–Ω—ã –≤–Ω–µ—à–Ω–∏–µ API
   - Latency –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–∞–º–∏
   - –ù—É–∂–Ω–∞ VPN –∏–ª–∏ –∑–∞—â–∏—â–µ–Ω–Ω–æ–µ API

4. **–î–≤–µ —Ç–æ—á–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è**
   - –î–≤–∞ docker-compose.yml —Ñ–∞–π–ª–∞
   - –î–≤–∞ –º–µ—Å—Ç–∞ –¥–ª—è backup
   - –î–≤–∞ –º–µ—Å—Ç–∞ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
   - –°–ª–æ–∂–Ω–µ–µ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

5. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –¥–æ–º–µ–Ω/–ø–æ–¥–¥–æ–º–µ–Ω**
   - –ù—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π –¥–æ–º–µ–Ω –∏–ª–∏ –ø–æ–¥–¥–æ–º–µ–Ω
   - –í–∞—Ä–∏–∞–Ω—Ç—ã: `onyx.aigain.io` –∏–ª–∏ `search.aigain.io`
   - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ DNS –∑–∞–ø–∏—Å–∏
   - –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Ç–∞–Ω–∏—Ü–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

6. **–ù–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–ª–æ–∂–Ω–µ–µ**
   - –ù—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä —Å –Ω—É–ª—è
   - setup-server.sh, UFW, Fail2ban, Docker
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ç–µ–≤–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–∞–º–∏
   - –ë–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ deployment

---

## üî¨ –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

### 1. Nginx –∫–æ–Ω—Ñ–ª–∏–∫—Ç - –ù–ï–¢ –ö–û–ù–§–õ–ò–ö–¢–ê ‚úÖ

**–°–∏—Ç—É–∞—Ü–∏—è:**
- –£ –Ω–∞—Å: `service_nginx_static` –Ω–∞ –ø–æ—Ä—Ç—É 80 (–≤–Ω—É—Ç—Ä–∏ Docker)
- Onyx: `onyx-nginx` –Ω–∞ –ø–æ—Ä—Ç—É 80 (–≤–Ω—É—Ç—Ä–∏ Docker)

**–ü–æ—á–µ–º—É –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞:**
- –ö–∞–∂–¥—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–º–µ–µ—Ç —Å–≤–æ–π network namespace
- –û–±–∞ Nginx —Å–ª—É—à–∞—é—Ç –Ω–∞ –ø–æ—Ä—Ç—É 80 **–≤–Ω—É—Ç—Ä–∏ —Å–≤–æ–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤**
- –ù–∞—Ä—É–∂—É –æ–Ω–∏ –ù–ï —ç–∫—Å–ø–æ–Ω–∏—Ä—É—é—Ç—Å—è (–Ω–µ—Ç `ports:` –≤ docker-compose)
- –î–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ Traefik labels:
  - `service_nginx_static` ‚Üí `https://social.aigain.io/data/*` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 300)
  - `onyx-nginx` ‚Üí `https://social.aigain.io:2060` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 70)

**–í—ã–≤–æ–¥:** –ö–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –Ω–µ—Ç, –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ.

---

### 2. Redis - –û–±—â–∏–π vs –û—Ç–¥–µ–ª—å–Ω—ã–π

**–í–∞—Ä–∏–∞–Ω—Ç A: –û–±—â–∏–π Redis** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```yaml
# Onyx –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π service_redis
ONYX_REDIS_HOST=service_redis
ONYX_REDIS_DB=2  # –û—Ç–¥–µ–ª—å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (0-15)
```

**–ü–ª—é—Å—ã:**
- –≠–∫–æ–Ω–æ–º–∏—è RAM (~27MB)
- –ú–µ–Ω—å—à–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- –ü—Ä–æ—â–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

**–ú–∏–Ω—É—Å—ã:**
- –û–±—â–∞—è —Ç–æ—á–∫–∞ –æ—Ç–∫–∞–∑–∞
- –ï—Å–ª–∏ Redis —É–ø–∞–¥–µ—Ç ‚Üí –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –ø–æ—Å—Ç—Ä–∞–¥–∞—é—Ç

**–í–∞—Ä–∏–∞–Ω—Ç B: –û—Ç–¥–µ–ª—å–Ω—ã–π Redis –¥–ª—è Onyx**
```yaml
onyx-redis:
  image: redis:7-alpine
  container_name: service_onyx_redis
```

**–ü–ª—é—Å—ã:**
- –ò–∑–æ–ª—è—Ü–∏—è (–µ—Å–ª–∏ —É–ø–∞–¥–µ—Ç ‚Üí —Ç–æ–ª—å–∫–æ Onyx –ø–æ—Å—Ç—Ä–∞–¥–∞–µ—Ç)
- –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ

**–ú–∏–Ω—É—Å—ã:**
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ 27MB RAM
- –ï—â–µ –æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—â–∏–π Redis —Å –æ—Ç–¥–µ–ª—å–Ω–æ–π DB (–≤–∞—Ä–∏–∞–Ω—Ç A).

---

### 3. –í–µ–∫—Ç–æ—Ä–Ω—ã–µ –ë–î: ChromaDB vs Vespa

**–£ –Ω–∞—Å:**
- **ChromaDB** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Flowise –∏ Chroma-API
- –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –¥–ª—è AI —á–∞—Ç–±–æ—Ç–æ–≤
- RAM: 344MB

**Onyx:**
- **Vespa** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Onyx –¥–ª—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: enterprise search, full-text + –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫
- RAM: 1-4GB

**–ü—Ä–æ–±–ª–µ–º–∞: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏**
- –û–±–∞ –¥–µ–ª–∞—é—Ç –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫
- Vespa –Ω–∞–º–Ω–æ–≥–æ –º–æ—â–Ω–µ–µ, –Ω–æ –∏ —Ç—è–∂–µ–ª–µ–µ
- –ö–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è –∑–∞ —Ä–µ—Å—É—Ä—Å—ã

**–ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Vespa –≤–º–µ—Å—Ç–æ ChromaDB?**
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –¥–∞, Vespa –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å —Ç–æ –∂–µ, —á—Ç–æ ChromaDB
- –ù–û: Flowise –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Vespa –∏–∑ –∫–æ—Ä–æ–±–∫–∏
- –ù—É–∂–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (—Å–ª–æ–∂–Ω–æ)

**–ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ChromaDB –≤–º–µ—Å—Ç–æ Vespa?**
- –ù–ï–¢, Onyx —Ç—Ä–µ–±—É–µ—Ç –∏–º–µ–Ω–Ω–æ Vespa
- Vespa - —ç—Ç–æ core –∫–æ–º–ø–æ–Ω–µ–Ω—Ç Onyx
- –ë–µ–∑ Vespa Onyx –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–í—ã–≤–æ–¥:** –ü—Ä–∏–¥–µ—Ç—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–±–∞, –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è –∑–∞ —Ä–µ—Å—É—Ä—Å—ã –Ω–µ–∏–∑–±–µ–∂–Ω–∞.

---

### 4. –†–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–µ –ë–î: MySQL vs PostgreSQL

**–£ –Ω–∞—Å:**
- **MySQL 8.0** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Node-RED, –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã
- RAM: 52MB

**Onyx:**
- **PostgreSQL 15** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Onyx
- RAM: 300-500MB

**–ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MySQL –≤–º–µ—Å—Ç–æ PostgreSQL?**
- –ù–ï–¢, Onyx **—Ç—Ä–µ–±—É–µ—Ç** PostgreSQL
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞–ø–∏—Å–∞–Ω—ã –ø–æ–¥ PostgreSQL
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è PostgreSQL —Ñ–∏—á–∏

**–ú–æ–∂–Ω–æ –ª–∏ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã –Ω–∞ PostgreSQL?**
- –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ –¥–∞, –Ω–æ –æ—á–µ–Ω—å —Å–ª–æ–∂–Ω–æ
- Node-RED flows –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å
- –†–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö
- –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è

**–í—ã–≤–æ–¥:** –ü—Ä–∏–¥–µ—Ç—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–±–µ –ë–î, –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å—Ü–µ–Ω–∞—Ä–∏—è–º

### –°—Ü–µ–Ω–∞—Ä–∏–π A: Onyx –Ω–∞ —Ç–µ–∫—É—â–µ–º —Å–µ—Ä–≤–µ—Ä–µ

**–ö–æ–≥–¥–∞ –≤—ã–±–∏—Ä–∞—Ç—å:**
- ‚úÖ –ë—é–¥–∂–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω (–Ω–µ —Ö–æ—á–µ—Ç—Å—è –ø–ª–∞—Ç–∏—Ç—å –∑–∞ –µ—â–µ –æ–¥–∏–Ω VPS)
- ‚úÖ Onyx –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —ç–ø–∏–∑–æ–¥–∏—á–µ—Å–∫–∏ (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞)
- ‚úÖ –ù—É–∂–Ω–∞ —Ç–µ—Å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç–µ–∫—É—â–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∞–∂–Ω–µ–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –ú–∏–Ω–∏–º—É–º 8GB RAM —Å–≤–æ–±–æ–¥–Ω–æ (—É –Ω–∞—Å –µ—Å—Ç—å ‚úÖ)
- –ú–∏–Ω–∏–º—É–º 20GB –¥–∏—Å–∫–∞ —Å–≤–æ–±–æ–¥–Ω–æ (—É –Ω–∞—Å 172GB ‚úÖ)
- –ú–∏–Ω–∏–º—É–º 4 CPU cores (—É –Ω–∞—Å 6 ‚úÖ)

**–†–∏—Å–∫–∏:**
- üü° –°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ –ø—Ä–∏ –ø–∏–∫–æ–≤—ã—Ö –Ω–∞–≥—Ä—É–∑–∫–∞—Ö
- üü° Vespa –º–æ–∂–µ—Ç –∑–∞–º–µ–¥–ª–∏—Ç—å –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã –ø—Ä–∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
- üü° –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–≤–∏—Å—è—Ç –æ—Ç –æ–¥–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è —Ä–∏—Å–∫–æ–≤:**
- –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã Onyx —á–µ—Ä–µ–∑ `deploy.resources.limits` –≤ docker-compose
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Prometheus + Grafana)
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–º CPU/RAM usage
- –†–µ–≥—É–ª—è—Ä–Ω—ã–µ backup –≤—Å–µ—Ö volumes

---

### –°—Ü–µ–Ω–∞—Ä–∏–π B: Onyx –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ

**–ö–æ–≥–¥–∞ –≤—ã–±–∏—Ä–∞—Ç—å:**
- ‚úÖ Onyx –±—É–¥–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è (production load)
- ‚úÖ –ù—É–∂–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ö—Ä–∏—Ç–∏—á–Ω–æ, —á—Ç–æ–±—ã Onyx –Ω–µ –≤–ª–∏—è–ª –Ω–∞ —Ç–µ–∫—É—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã
- ‚úÖ –ë—é–¥–∂–µ—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π VPS ($20-50/–º–µ—Å—è—Ü)

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è VPS:**
- RAM: 8-16GB (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ 16GB)
- CPU: 4-8 cores
- Disk: 50-100GB SSD
- –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã: Hetzner (‚Ç¨20-40/–º–µ—Å), DigitalOcean ($48-96/–º–µ—Å)

**–ü–ª—é—Å—ã:**
- üü¢ –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
- üü¢ Onyx –ø–æ–ª—É—á–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- üü¢ –¢–µ–∫—É—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã –Ω–µ —Å—Ç—Ä–∞–¥–∞—é—Ç
- üü¢ –ù–µ–∑–∞–≤–∏—Å–∏–º–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ú–∏–Ω—É—Å—ã:**
- üî¥ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã
- üî¥ –°–ª–æ–∂–Ω–µ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–¥–≤–∞ —Å–µ—Ä–≤–µ—Ä–∞)
- üî¥ –ù—É–∂–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ç–µ–≤–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

---

### –°—Ü–µ–Ω–∞—Ä–∏–π C: –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

**–ò–¥–µ—è:** –ù–∞—á–∞—Ç—å —Å —Ç–µ–∫—É—â–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞, –ø–æ—Ç–æ–º –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏

**–≠—Ç–∞–ø 1: –ü–∏–ª–æ—Ç –Ω–∞ —Ç–µ–∫—É—â–µ–º —Å–µ—Ä–≤–µ—Ä–µ (1-2 –º–µ—Å—è—Ü–∞)**
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Onyx –Ω–∞ —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –û—Ü–µ–Ω–∏—Ç—å —Ä–µ–∞–ª—å–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å —Ç–µ–∫—É—â–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
- –ü–æ–Ω—è—Ç—å, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ª–∏ –Ω—É–∂–µ–Ω Onyx

**–≠—Ç–∞–ø 2: –†–µ—à–µ–Ω–∏–µ –æ –º–∏–≥—Ä–∞—Ü–∏–∏**
- –ï—Å–ª–∏ Onyx –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ‚Üí –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
- –ï—Å–ª–∏ Onyx –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —ç–ø–∏–∑–æ–¥–∏—á–µ—Å–∫–∏ ‚Üí –æ—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ —Ç–µ–∫—É—â–µ–º
- –ï—Å–ª–∏ Onyx –Ω–µ –Ω—É–∂–µ–Ω ‚Üí —É–¥–∞–ª–∏—Ç—å

**–≠—Ç–∞–ø 3: –ú–∏–≥—Ä–∞—Ü–∏—è (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)**
- –í–∑—è—Ç—å VPS 8-16GB RAM
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É
- Backup –¥–∞–Ω–Ω—ã—Ö Onyx (PostgreSQL, Vespa, file store)
- –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –Ω–∞ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å DNS (onyx.aigain.io)
- –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ü–ª—é—Å—ã –≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:**
- üü¢ –ù–∏–∑–∫–∏–π —Ä–∏—Å–∫ (–º–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è)
- üü¢ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞—á–∞–ª—å–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã
- üü¢ –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –ø–µ—Ä–µ–¥ –ø–æ–∫—É–ø–∫–æ–π VPS
- üü¢ –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ú–∏–Ω—É—Å—ã:**
- üü° –ù—É–∂–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è –ø–æ–∑–∂–µ (–Ω–æ backup/restore –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ–π)

---

## üìä –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –¢–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä | –û—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä |
|----------|----------------|------------------|
| **üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å** | $0 (—É–∂–µ –µ—Å—Ç—å) | $20-50/–º–µ—Å |
| **‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | –°—Ä–µ–¥–Ω—è—è (–∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è) | –í—ã—Å–æ–∫–∞—è (–∏–∑–æ–ª—è—Ü–∏—è) |
| **üõ°Ô∏è –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** | –ù–∏–∑–∫–∞—è (single point) | –í—ã—Å–æ–∫–∞—è (–∏–∑–æ–ª—è—Ü–∏—è) |
| **üîß –°–ª–æ–∂–Ω–æ—Å—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è** | –ü—Ä–æ—Å—Ç–∞—è (–æ–¥–∏–Ω —Å–µ—Ä–≤–µ—Ä) | –°–ª–æ–∂–Ω–∞—è (–¥–≤–∞ —Å–µ—Ä–≤–µ—Ä–∞) |
| **üåê –°–µ—Ç–µ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** | –õ–µ–≥–∫–∞—è (–æ–¥–Ω–∞ —Å–µ—Ç—å) | –°–ª–æ–∂–Ω–∞—è (—Ä–∞–∑–Ω—ã–µ —Å–µ—Ç–∏) |
| **üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ** | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–æ (11GB RAM) | –°–≤–æ–±–æ–¥–Ω–æ–µ (–º–æ–∂–Ω–æ –≤–∑—è—Ç—å 32GB) |
| **üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è** | –†–∏—Å–∫–æ–≤–∞–Ω–Ω—ã–µ (–≤—Å–µ –≤–º–µ—Å—Ç–µ) | –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ (–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ) |
| **üì¶ Backup** | –û–¥–∏–Ω backup –≤—Å–µ–≥–æ | –î–≤–∞ backup (–Ω–æ –ø—Ä–æ—â–µ) |
| **üöÄ –í—Ä–µ–º—è deployment** | 2-3 —á–∞—Å–∞ | 4-6 —á–∞—Å–æ–≤ |
| **üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** | –ï–¥–∏–Ω—ã–π (–ø—Ä–æ—â–µ) | –†–∞–∑–¥–µ–ª—å–Ω—ã–π (—Å–ª–æ–∂–Ω–µ–µ) |
| **üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** | –û–±—â–∞—è (—Ä–∏—Å–∫ cascade) | –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è (–±–µ–∑–æ–ø–∞—Å–Ω–µ–µ) |

---

## üé¨ –§–∏–Ω–∞–ª—å–Ω–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

### ‚ú® –†–ï–ö–û–ú–ï–ù–î–£–Æ: –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥

**–§–∞–∑–∞ 1: –ü–∏–ª–æ—Ç (1-2 –º–µ—Å—è—Ü–∞) - –¢–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä**

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Onyx –Ω–∞ —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä** –ø–æ PLAN2.md
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã** –≤ —Ç–µ—á–µ–Ω–∏–µ 1-2 –º–µ—Å—è—Ü–µ–≤:
   ```bash
   # –°–∫—Ä–∏–ø—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
   watch -n 60 'docker stats --no-stream'
   ```
3. **–û—Ü–µ–Ω–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
   - –°–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç Onyx?
   - –ö–∞–∫–∞—è —Ä–µ–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ CPU/RAM?
   - –í–ª–∏—è–µ—Ç –ª–∏ Onyx –Ω–∞ –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã?
   - –î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ª–∏ –Ω—É–∂–Ω—ã –≤—Å–µ —Ñ–∏—á–∏ Onyx?

**–§–∞–∑–∞ 2: –†–µ—à–µ–Ω–∏–µ (–ø–æ—Å–ª–µ 1-2 –º–µ—Å—è—Ü–µ–≤)**

**–í–∞—Ä–∏–∞–Ω—Ç A: –û—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ —Ç–µ–∫—É—â–µ–º —Å–µ—Ä–≤–µ—Ä–µ**
–ï—Å–ª–∏:
- Onyx –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —ç–ø–∏–∑–æ–¥–∏—á–µ—Å–∫–∏ (1-2 —Ä–∞–∑–∞ –≤ –¥–µ–Ω—å)
- –ù–µ—Ç –∂–∞–ª–æ–± –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- CPU/RAM usage —Å—Ç–∞–±–∏–ª—å–Ω–æ < 70%
- –ë—é–¥–∂–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω

**–í–∞—Ä–∏–∞–Ω—Ç B: –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä**
–ï—Å–ª–∏:
- Onyx –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (> 10 —Ä–∞–∑ –≤ –¥–µ–Ω—å)
- –ï—Å—Ç—å –∂–∞–ª–æ–±—ã –Ω–∞ –º–µ–¥–ª–µ–Ω–Ω—É—é —Ä–∞–±–æ—Ç—É
- CPU/RAM usage —á–∞—Å—Ç–æ > 80%
- Vespa –∑–∞–º–µ–¥–ª—è–µ—Ç –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã
- –ë—é–¥–∂–µ—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç $20-50/–º–µ—Å

**–í–∞—Ä–∏–∞–Ω—Ç C: –£–¥–∞–ª–∏—Ç—å Onyx**
–ï—Å–ª–∏:
- Onyx –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ (LightRAG, Flowise)
- –ù–µ –æ–ø—Ä–∞–≤–¥—ã–≤–∞–µ—Ç —Ä–µ—Å—É—Ä—Å—ã

---

## üìù –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è

### –ü–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –Ω–∞ —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä:

- [ ] –†–µ—Å—É—Ä—Å—ã –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã (8GB+ RAM —Å–≤–æ–±–æ–¥–Ω–æ)
- [ ] –î–∏—Å–∫ –¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω (20GB+ —Å–≤–æ–±–æ–¥–Ω–æ)
- [ ] Backup —Ç–µ–∫—É—â–µ–π —Å–∏—Å—Ç–µ–º—ã —Å–¥–µ–ª–∞–Ω
- [ ] –ï—Å—Ç—å –ø–ª–∞–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
- [ ] –ï—Å—Ç—å –ø–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞ (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥–µ—Ç –Ω–µ —Ç–∞–∫)
- [ ] –ü–æ–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ Onyx –º–æ–∂–µ—Ç –∑–∞–º–µ–¥–ª–∏—Ç—å –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã
- [ ] –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (–µ—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è)

### –ü–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä:

- [ ] –ë—é–¥–∂–µ—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç $20-50/–º–µ—Å
- [ ] –í—ã–±—Ä–∞–Ω VPS –ø—Ä–æ–≤–∞–π–¥–µ—Ä (Hetzner, DigitalOcean, etc.)
- [ ] –í—ã–±—Ä–∞–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (8-16GB RAM, 4-8 CPU)
- [ ] –ï—Å—Ç—å –ø–ª–∞–Ω –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–æ–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
- [ ] –ï—Å—Ç—å –ø–ª–∞–Ω —Å–µ—Ç–µ–≤–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–∞–º–∏
- [ ] –í—ã–±—Ä–∞–Ω –¥–æ–º–µ–Ω/–ø–æ–¥–¥–æ–º–µ–Ω –¥–ª—è Onyx (onyx.aigain.io)
- [ ] –ü–æ–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—É–¥–µ—Ç —Å–ª–æ–∂–Ω–µ–µ (–¥–≤–∞ —Å–µ—Ä–≤–µ—Ä–∞)

---

## üîó –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ï—Å–ª–∏ –≤—ã–±—Ä–∞–ª–∏ —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä:
1. –°–ª–µ–¥–æ–≤–∞—Ç—å PLAN2.md
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Onyx 1-2 –º–µ—Å—è—Ü–∞
4. –ü—Ä–∏–Ω—è—Ç—å —Ä–µ—à–µ–Ω–∏–µ –æ –º–∏–≥—Ä–∞—Ü–∏–∏

### –ï—Å–ª–∏ –≤—ã–±—Ä–∞–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä:
1. –ö—É–ø–∏—Ç—å VPS (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é Hetzner - –¥–µ—à–µ–≤–ª–µ)
2. –°–æ–∑–¥–∞—Ç—å PLAN2-SEPARATE-SERVER.md (–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞–Ω)
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Onyx –Ω–∞ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä
5. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–µ—Ç–µ–≤–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ

---

**–ö–æ–Ω–µ—Ü –∞–Ω–∞–ª–∏–∑–∞**
**–ê–≤—Ç–æ—Ä:** Claude AI Assistant
**–î–∞—Ç–∞:** 2025-10-07
