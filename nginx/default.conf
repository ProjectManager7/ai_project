server {
    listen 80;
    server_name _;
    
    root /usr/share/nginx/html;
    
    # Основная точка для статических файлов /data/*
    location /data/ {
        
        # Настройки кеширования
        expires 1y;
        add_header Cache-Control "public, immutable";
        
        # Обработка CORS если необходимо
        add_header Access-Control-Allow-Origin "*";
        add_header Access-Control-Allow-Methods "GET, HEAD, OPTIONS";
        add_header Access-Control-Allow-Headers "Origin, X-Requested-With, Content-Type, Accept";
        
        # Обработка OPTIONS запросов
        if ($request_method = 'OPTIONS') {
            add_header Access-Control-Allow-Origin "*";
            add_header Access-Control-Allow-Methods "GET, HEAD, OPTIONS";
            add_header Access-Control-Max-Age 86400;
            return 204;
        }
        
        # Автоматический индекс для каталогов
        autoindex on;
        autoindex_exact_size off;
        autoindex_localtime on;
        autoindex_format html;
        
        # Попытка найти файл, иначе 404
        try_files $uri $uri/ =404;
    }
    
    # Health check endpoint
    location /health {
        access_log off;
        return 200 "nginx static server ok\n";
        add_header Content-Type text/plain;
    }
    
    # Основная страница (если нужна)
    location = / {
        return 404;
    }
    
    # Логирование
    access_log /var/log/nginx/static_access.log;
    error_log /var/log/nginx/static_error.log warn;
    
    # Настройки безопасности
    server_tokens off;
    
}